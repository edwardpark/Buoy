
<script src="//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=geometry,places" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>
<header id="main">
  <h1><%= "Edit #{@event.name}" %></h1>
  <%= link_to events_path, :class => "block" do %>
    <div class="pull-left">
      <i class="fa fa-chevron-left"></i>
    </div>
  <% end %>
  <%= link_to new_venue_path(event_id: @event.id), :class => "block", :title => "Add a buoy to event",:id => "btn-edit" do %>
    <div class="pull-right">
      <i class="fa fa-anchor "></i>
    </div>
  <% end %>
</header>

<div id="view">
  <div class="container">
    <div class="event-block">
      <div class="event-map">
        <div id="map-container">
          <div id="map"></div>
        </div>
      </div>
      <div class="event-info">
        <div class="content">
          <input id="pac-input" class="controls" type="text" placeholder="Search Box">
          <div id="map-canvas"></div>

          <%= render 'form_edit_event' %>
        </div>
      </div> <!-- /.event-info -->
    </div> <!-- /.event-block -->
  </div>
</div>



<script type="text/javascript">

    handler = Gmaps.build('Google');
    handler.buildMap({ 
      provider: {
      auto_zoom:true, 
      maxZoom:18
    }, 
    internal: { id: 'map'}}, 
    function(){
      markers = handler.addMarkers(<%=raw @hash.to_json %>);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
    });


</script>

